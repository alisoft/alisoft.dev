{"key":"content:ja:docs:7.components-glossary:10.watchquery.md","generatedAt":"2022-03-15T12:18:30.236Z","mtime":"2022-03-15T12:18:30.228Z","slug":"watchquery","title":"watchQuery プロパティ","position":"999900070010","to":"/docs/components-glossary/watchquery","draft":false,"page":true,"language":"ja","description":"クエリ文字列を監視し、変更時にコンポーネントメソッドを実行します（asyncData、fetch、validate、layout など）","navigation":{"title":"WatchQuery Property"},"category":"components-glossary","empty":false,"body":{"raw":"---\ntitle: watchQuery プロパティ\ndescription: クエリ文字列を監視し、変更時にコンポーネントメソッドを実行します（asyncData、fetch、validate、layout など）\nnavigation.title: WatchQuery Property\ncategory: components-glossary\n---\n# watchQuery プロパティ\n\nクエリ文字列を監視し、変更時にコンポーネントメソッドを実行します（asyncData、fetch、validate、layout など）\n\n---\n\n- **型:** `Boolean` または `Array` または `Function` (デフォルト: `[]`)\n\n`watchQuery` キーを設定し、監視するクエリ文字列を設定します。定義した文字列に変更が生じると、全てのコンポーネントメソッド（asyncData、fetch、validate、layout などが呼ばれます。パフォーマンス向上のため、監視はデフォルトで無効になっています。\n\nすべてのクエリ文字列に対して監視を設定したい場合は `watchQuery: true` を設定してください。\n\n```js\nexport default {\n  watchQuery: ['page']\n}\n```\n\nより洗練された監視のために `watchQuery(newQuery, oldQuery)` 関数を使用することもできます。\n\n```js\nexport default {\n  watchQuery(newQuery, oldQuery) {\n    // 古いクエリ文字列に `bar` が含まれている場合コンポーネントメソッドのみを実行し、\n    // そして、新しいクエリ文字列には `foo` が含まれる\n    return newQuery.foo && oldQuery.bar\n  }\n}\n```\n\n::alert{type=\"warning\"}\n**警告**: \nv2.12 で導入された新しい `fetch` フックは `watchQuery` の影響を受けません。詳しくは[クエリ文字列の変化のリスニング](/docs/features/data-fetching#fetch-フック)を参照してください。\n::\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"watchquery-プロパティ"},"children":[{"type":"text","value":"watchQuery プロパティ"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"クエリ文字列を監視し、変更時にコンポーネントメソッドを実行します（asyncData、fetch、validate、layout など）"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"型:"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Boolean"}]},{"type":"text","value":" または "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Array"}]},{"type":"text","value":" または "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Function"}]},{"type":"text","value":" (デフォルト: "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"[]"}]},{"type":"text","value":")"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"watchQuery"}]},{"type":"text","value":" キーを設定し、監視するクエリ文字列を設定します。定義した文字列に変更が生じると、全てのコンポーネントメソッド（asyncData、fetch、validate、layout などが呼ばれます。パフォーマンス向上のため、監視はデフォルトで無効になっています。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"すべてのクエリ文字列に対して監視を設定したい場合は "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"watchQuery: true"}]},{"type":"text","value":" を設定してください。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  watchQuery"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'page'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"より洗練された監視のために "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"watchQuery(newQuery, oldQuery)"}]},{"type":"text","value":" 関数を使用することもできます。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"watchQuery"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"text","value":"newQuery"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" oldQuery"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// 古いクエリ文字列に `bar` が含まれている場合コンポーネントメソッドのみを実行し、"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// そして、新しいクエリ文字列には `foo` が含まれる"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" newQuery"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"foo"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":" oldQuery"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"bar"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"警告"}]},{"type":"text","value":":\nv2.12 で導入された新しい "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" フックは "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"watchQuery"}]},{"type":"text","value":" の影響を受けません。詳しくは"},{"type":"element","tag":"prose-a","props":{"href":"/docs/features/data-fetching#fetch-%E3%83%95%E3%83%83%E3%82%AF"},"children":[{"type":"text","value":"クエリ文字列の変化のリスニング"}]},{"type":"text","value":"を参照してください。"}]}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}}}