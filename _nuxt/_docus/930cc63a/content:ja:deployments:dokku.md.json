{"key":"content:ja:deployments:dokku.md","generatedAt":"2022-03-15T12:42:48.060Z","mtime":"2022-03-15T12:42:48.056Z","slug":"dokku","title":"Dokku","position":"999999990000","to":"/deployments/dokku","draft":false,"page":true,"language":"ja","template":"guide","description":"Nuxt アプリケーションを Dokku でどうやってデプロイするのか？","target":"Server","category":"deployment","logo":{"light":"/img/companies/square/light/dokku.png","dark":"/img/companies/square/dark/dokku.png"},"empty":false,"body":{"raw":"---\ntemplate: guide\ntitle: Dokku\ndescription: Nuxt アプリケーションを Dokku でどうやってデプロイするのか？\ntarget: Server\ncategory: deployment\nlogo:\n  light: \"/img/companies/square/light/dokku.png\"\n  dark: \"/img/companies/square/dark/dokku.png\"\n---\n\n# Dokku で Nuxt をデプロイする\n\nNuxt アプリケーションを Dokku でどうやってデプロイするのか？\n\n---\n\n[Dokku documentation for setup](http://dokku.viewdocs.io/dokku/getting-started/installation/) そして [Deploying a Node.js Application on Digital Ocean using Dokku](http://jakeklassen.com/post/deploying-a-node-app-on-digital-ocean-using-dokku/)をお読みになることをお勧めします。\n\n例として、ここでは Nuxt アプリケーションを `my-nuxt-app` と呼ぶことにします。\n\nプロジェクトの `devDependencies` をインストールするように Dokku に指示する必要があります（`npm run build` を起動できるようにするため）。\n\n```bash\n// Dokku サーバー上で\ndokku config:set my-nuxt-app NPM_CONFIG_PRODUCTION=false YARN_PRODUCTION=false\n```\n\nまた、アプリケーションはホスト `0.0.0.0` をリッスンし、プロダクションモードで動作するようにします：\n\n```bash\n// Dokku サーバー上で\ndokku config:set my-nuxt-app HOST=0.0.0.0 NODE_ENV=production\n```\n\n`dokku config my-nuxt-app` を手でタイプするとき、 以下の 3 行が見ることができるはずです\n\n![nuxt config vars Dokku](https://i.imgur.com/9FNsaoQ.png)\n\n次に、プロジェクトの `app.json` にある `scripts.dokku.predeploy` スクリプトを使って、`npm run build` を起動するように Dokku に指示します：\n\n`create a file name app.json in our project root folder`\n\n```js\n{\n  \"scripts\": {\n    \"dokku\": {\n      \"predeploy\": \"npm run build\"\n    }\n  }\n}\n```\n\nアプリケーションを起動するために、[Procfile](http://dokku.viewdocs.io/dokku/deployment/methods/dockerfiles/#procfiles-and-multiple-processes) を使って `npm run start` を実行します：\n\n```\nweb: npm run start\n```\n\n最後に、Dokku にアプリケーションを push することができます：\n\n```bash\n// push する前に変更をコミット\ngit remote add dokku dokku@yourServer:my-nuxt-app\ngit push dokku master\n```\n\nここに、Nuxt アプリケーションが Dokku にホストされました！\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"dokku-で-nuxt-をデプロイする"},"children":[{"type":"text","value":"Dokku で Nuxt をデプロイする"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Nuxt アプリケーションを Dokku でどうやってデプロイするのか？"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-a","props":{"href":"http://dokku.viewdocs.io/dokku/getting-started/installation/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Dokku documentation for setup"}]},{"type":"text","value":" そして "},{"type":"element","tag":"prose-a","props":{"href":"http://jakeklassen.com/post/deploying-a-node-app-on-digital-ocean-using-dokku/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Deploying a Node.js Application on Digital Ocean using Dokku"}]},{"type":"text","value":"をお読みになることをお勧めします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"例として、ここでは Nuxt アプリケーションを "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"my-nuxt-app"}]},{"type":"text","value":" と呼ぶことにします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"プロジェクトの "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"devDependencies"}]},{"type":"text","value":" をインストールするように Dokku に指示する必要があります（"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" を起動できるようにするため）。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// Dokku サーバー上で\ndokku config:set my-nuxt-app "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NPM_CONFIG_PRODUCTION"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"false "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"YARN_PRODUCTION"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"false\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"また、アプリケーションはホスト "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"0.0.0.0"}]},{"type":"text","value":" をリッスンし、プロダクションモードで動作するようにします："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// Dokku サーバー上で\ndokku config:set my-nuxt-app "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"HOST"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"0.0"}]},{"type":"text","value":".0.0 "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"production\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dokku config my-nuxt-app"}]},{"type":"text","value":" を手でタイプするとき、 以下の 3 行が見ることができるはずです"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"nuxt config vars Dokku","src":"https://i.imgur.com/9FNsaoQ.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"次に、プロジェクトの "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"app.json"}]},{"type":"text","value":" にある "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"scripts.dokku.predeploy"}]},{"type":"text","value":" スクリプトを使って、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" を起動するように Dokku に指示します："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"create a file name app.json in our project root folder"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"dokku\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"predeploy\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"npm run build\""}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"アプリケーションを起動するために、"},{"type":"element","tag":"prose-a","props":{"href":"http://dokku.viewdocs.io/dokku/deployment/methods/dockerfiles/#procfiles-and-multiple-processes","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Procfile"}]},{"type":"text","value":" を使って "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run start"}]},{"type":"text","value":" を実行します："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-text"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"web: npm run start\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"最後に、Dokku にアプリケーションを push することができます："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// push する前に変更をコミット\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" remote "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" dokku dokku@yourServer:my-nuxt-app\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push dokku master\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"ここに、Nuxt アプリケーションが Dokku にホストされました！"}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}}}