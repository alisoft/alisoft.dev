{"key":"content:fr:docs:2.concepts:2.context-helpers.md","generatedAt":"2022-03-15T12:42:46.529Z","mtime":"2022-03-15T12:42:46.503Z","slug":"context-helpers","title":"Helpers et Contexte","position":"999900020002","to":"/docs/concepts/context-helpers","draft":false,"page":true,"language":"fr","description":"Le contexte fournit des informations *additionnelles* et souvent optionnelles de la requête envoyée à l'application.","category":"concepts","csb_link_context":"https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/02_concepts/02_context_helpers-context?fontsize=14&hidenavigation=1&theme=dark","csb_link_helpers":"https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/02_concepts/02_context_helpers-helpers?fontsize=14&hidenavigation=1&theme=dark","empty":false,"body":{"raw":"---\ntitle: Helpers et Contexte\ndescription: Le contexte fournit des informations *additionnelles* et souvent optionnelles de la requête envoyée à l'application.\ncategory: concepts\ncsb_link_context: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/02_concepts/02_context_helpers-context?fontsize=14&hidenavigation=1&theme=dark\ncsb_link_helpers: https://codesandbox.io/embed/github/nuxt-academy/guides-examples/tree/master/02_concepts/02_context_helpers-helpers?fontsize=14&hidenavigation=1&theme=dark\n---\n# Helpers et Contexte\n\nLe contexte fournit des informations *additionnelles* et souvent optionnelles de la requête envoyée à l'application.\n\n---\n\n![Nuxt context keys](/img/docs/context.svg)\n\nL'objet `context` est disponible dans des fonctions spécifiques de Nuxt comme [asyncData](/docs/features/data-fetching#async-data), [plugins](/docs/directory-structure/plugins), [middleware](/docs/directory-structure/middleware) et [nuxtServerInit](/docs/directory-structure/store#the-nuxtserverinit-action). Le contexte fournit des informations _additionnelles_ et souvent optionnelles de la requête envoyée à l'application.\n\nTout d'abord, le contexte est utilisé pour permettre un accès aux autres parties d'une application Nuxt, comme par exemple un store Vuex ou l'instance `connect` sous-jacente. Ainsi, nous avons les objets `req` et `res` disponibles dans le contexte du côté serveur et le `store` de toujours disponible. Avec le temps, le contexte fut étendu avec plein d'autres variables bien pratiques et de raccourcis. Ainsi, nous avons accès au fonctionnalités du HMR en mode `development`, la `route` actuelle, les `params` de la page, la `query` (URL), ainsi que la possibilité d'avoir accès à des variables d'environment à travers le contexte. En plus de cela, les modules de fonctions et les helpers peuvent être exposés à travers le contexte pour être disponibles sur les deux - côté client et serveur.\n\n**Toutes les propriétés du contexte qui sont présents par défaut**\n\n```js\nfunction (context) {\n  // toujours disponibles\n  const {\n    app,\n    store,\n    route,\n    params,\n    query,\n    env,\n    isDev,\n    isHMR,\n    redirect,\n    error,\n   $config\n  } = context\n\n  // disponible uniquement côté serveur\n  if (process.server) {\n    const { req, res, beforeNuxtRender } = context\n  }\n\n  // disponible uniquement côté client\n  if (process.client) {\n    const { from, nuxtState } = context\n  }\n}\n```\n\n::alert{type=\"warning\"}\n\nLe _context_ dont nous parlons ici ne doit pas être confondu avec l'objet `context` disponible dans les [Actions Vuex](https://vuex.vuejs.org/guide/actions.html) ou celui disponible dans la fonction `build.extend` dans notre `nuxt.config.js`. Ils n'ont absolument aucun rapport entre eux !\n\n::\n\nDécouvrez davantage de propriétés disponibles dans le contexte dans le [Glossaire des propriétés internes](/docs/internals-glossary/context)\n\n## Exemples\n\n### Utiliser les paramètres de la page pour notre requête API\n\nLe contexte expose directement tous les paramètres dynamiques possibles de la route via `context.params`. Dans l'exemple suivant, on appelle une API grâce au module `nuxt/http` en utilisant un paramètre dynamique de la page dans l'URL. Les modules tels que [nuxt/http](https://http.nuxtjs.org/) peuvent exposer leurs propres fonctions qui sont par la suite disponibles à travers l'objet `context.app`.\n\nDe plus, nous allons entourer l'appel d'API d'une instruction `try/catch` pour gérer le cas d'erreurs potentielles. Avec la fonction `context.error`, nous pouvons directement afficher la page d'erreur de Nuxt et lui passer l'erreur survenue.\n\n```js{}[pages/posts/_id.vue]\nexport default {\n  async asyncData(context) {\n    const id = context.params.id\n    try {\n      // ici, on utilise le module nuxtjs/http disponible via context.app\n      const post = await context.app.$http.$get(\n        `https://api.nuxtjs.dev/posts/${id}`\n      )\n      return { post }\n    } catch (error) {\n      context.error(error) // affiche la page d'erreur de nuxt avec l'erreur correspondante\n    }\n  }\n}\n```\n\nGrâce à l'[ES6](https://hacks.mozilla.org/2015/05/es6-in-depth-destructuring/), on peut utiliser la syntaxe pour déstructurer l'objet `context`. On peut passer les objets auxquels nous voulons avoir accès et ensuite les utiliser dans notre code sans même utiliser le mot `context`.\n\n```js{}[pages/posts/_id.vue]\nexport default {\n  async asyncData({ params, $http, error }) {\n    const id = params.id\n\n    try {\n      // ici on utilise le module nuxtjs/http depuis le contexte\n      const post = await $http.$get(`https://api.nuxtjs.dev/posts/${id}`)\n      return { post }\n    } catch (error) {\n      error(error) // affiche la page d'erreur de nuxt avec l'erreur correspondante\n    }\n  }\n}\n```\n\nSi nous préférons utiliser les paramètres de la requête, nous pouvons alors utiliser `context.query.id`.\n\n### Rediriger les utilisateurs et accéder au store\n\nAccéder au store Vuex (quand nous l'avons configuré dans le répertoire `store`) est aussi possible via le contexte. Cela fournit un objet `store` qui est équivalent à `this.$store` dans les composants Vue. De plus, on peut utiliser la méthode `redirect`, un helper disponible via le contexte, pour rediriger l'utilisateur dans le cas où le state `authenticated` est [falsy](https://developer.mozilla.org/fr/docs/Glossary/Falsy).\n\n```js\nexport default {\n  middleware({ store, redirect }) {\n    // on déstructure les objets avec leurs propriétés\n    const isAuthenticated = store.state.authenticated\n    if (!isAuthenticated) {\n      return redirect('/login')\n    }\n  }\n}\n```\n\n## Les helpers\n\nEn plus des raccourcis dans le contexte, il y a aussi de petits helpers présents dans notre application Nuxt.\n\n## `$nuxt`: Le helper Nuxt\n\nLe helper `$nuxt` est prévu pour améliorer l'expérience utilisateur et peut être une trappe de secours dans certains cas. Il est accessible via `this.$nuxt` dans les composants Vue et via `window.$nuxt` du côté client.\n\n### Vérification de la connexion\n\nLe helper `$nuxt` fournit un moyen rapide pour voir si l'utilisateur a de la connexion ou pas: nous avons accès aux booléens `isOffline` et `isOnline`. On peut utiliser ceux-ci pour montrer un message dès que l'utilisateur est hors ligne (par exemple).\n\n```html{}[layouts/default.vue]\n<template>\n  <div>\n    <div v-if=\"$nuxt.isOffline\">Vous êtes hors-ligne</div>\n    <Nuxt />\n  </div>\n</template>\n```\n\n### Accéder à l'instance racine\n\nAu delà de l'aspect DX/UX, le helper `$nuxt` fournit aussi un raccourci à l'instance racine de notre application à partir de n'importe quel composant. Mais ce n'est pas tout - nous pouvons aussi avoir accès au helper `$nuxt` via `window.$nuxt`, ce qui peut être pratique comme solution de secours pour avoir accès à des méthodes de module comme `$axios` depuis l'extérieur de nos composants Vue. Nous pouvons utiliser cela judicieusement et seulement en **dernier recours**.\n\n### Actualiser la data de la page\n\nQuand nous voulons actualiser la page actuelle pour l'utilisateur, nous ne voulons pas recharger la page intégralement et entraîner une nouvelle requête au serveur ainsi qu'une nouvelle initialisation de l'intégralité de notre application Nuxt. À la place, on préférera souvent juste actualiser la data, que l'on peut récupérer avec `asyncData` ou `fetch`.\n\nNous pouvons faire cela en utilisant `this.$nuxt.refresh()` !\n\n```html\n<template>\n  <div>\n    <div>{{ content }}</div>\n    <button @click=\"refresh\">Actualiser</button>\n  </div>\n</template>\n\n<script>\n  export default {\n    asyncData() {\n      return { content: 'Créé le: ' + new Date() }\n    },\n    methods: {\n      refresh() {\n        this.$nuxt.refresh()\n      }\n    }\n  }\n</script>\n```\n\n### Contrôler la barre de progression\n\nAvec `$nuxt`, nous pouvons aussi contrôler la barre de progression de manière programmatique via `this.$nuxt.$loading`.\n\n```js\nexport default {\n  mounted() {\n    this.$nextTick(() => {\n      this.$nuxt.$loading.start()\n      setTimeout(() => this.$nuxt.$loading.finish(), 500)\n    })\n  }\n}\n```\n\nPlus d'informations sont disponibles dans le [chapitre sur le chargement](/docs/features/loading)\n\n## Le helper onNuxtReady\n\nSi nous voulons exécuter certains scripts _après_ que notre application Nuxt soit chargée et prête, nous pouvons utiliser la fonction `window.onNuxtReady`. Cela peut être utile si nous souhaitons exécuter une fonction côté client sans augmenter le temps à l'interactivité ([TTI](https://web.dev/tti/)).\n\n```js\nwindow.onNuxtReady(() => {\n  console.log('Nuxt est monté et prêt')\n})\n```\n\n## Les helpers de Process\n\nNuxt injecte trois valeurs booléennes dans l'objet global `process`, ce dernier va permettre de déterminer si l'app a été render côté serveur ou intégralement côté client, ainsi que vérifier la génération du site en version statique. Ces helpers sont disponibles à travers notre application et sont communément utilisés dans un bloc `asyncData`.\n\n```html{}[pages/about.vue]\n<template>\n  <h1>Je suis render côté {{ renderedOn }}</h1>\n</template>\n\n<script>\n  export default {\n    asyncData() {\n      return { renderedOn: process.client ? 'client' : 'serveur' }\n    }\n  }\n</script>\n```\n\nDans l'exemple, `renderedOn` aura la valeur `'serveur'` dans le cas d'un render côté serveur quand un utilisateur arrivera sur la page directement. Quand l'utilisateur voudra naviguer jusqu'à la page à partir d'un autre endroit de l'application, par exemple en cliquant sur un `<NuxtLink>`, la valeur sera à `'client'`.\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"helpers-et-contexte"},"children":[{"type":"text","value":"Helpers et Contexte"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Le contexte fournit des informations "},{"type":"element","tag":"prose-em","props":{},"children":[{"type":"text","value":"additionnelles"}]},{"type":"text","value":" et souvent optionnelles de la requête envoyée à l'application."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"Nuxt context keys","src":"/img/docs/context.svg"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"L'objet "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context"}]},{"type":"text","value":" est disponible dans des fonctions spécifiques de Nuxt comme "},{"type":"element","tag":"prose-a","props":{"href":"/docs/features/data-fetching#async-data"},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":", "},{"type":"element","tag":"prose-a","props":{"href":"/docs/directory-structure/plugins"},"children":[{"type":"text","value":"plugins"}]},{"type":"text","value":", "},{"type":"element","tag":"prose-a","props":{"href":"/docs/directory-structure/middleware"},"children":[{"type":"text","value":"middleware"}]},{"type":"text","value":" et "},{"type":"element","tag":"prose-a","props":{"href":"/docs/directory-structure/store#the-nuxtserverinit-action"},"children":[{"type":"text","value":"nuxtServerInit"}]},{"type":"text","value":". Le contexte fournit des informations "},{"type":"element","tag":"prose-em","props":{},"children":[{"type":"text","value":"additionnelles"}]},{"type":"text","value":" et souvent optionnelles de la requête envoyée à l'application."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Tout d'abord, le contexte est utilisé pour permettre un accès aux autres parties d'une application Nuxt, comme par exemple un store Vuex ou l'instance "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"connect"}]},{"type":"text","value":" sous-jacente. Ainsi, nous avons les objets "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"req"}]},{"type":"text","value":" et "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"res"}]},{"type":"text","value":" disponibles dans le contexte du côté serveur et le "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"store"}]},{"type":"text","value":" de toujours disponible. Avec le temps, le contexte fut étendu avec plein d'autres variables bien pratiques et de raccourcis. Ainsi, nous avons accès au fonctionnalités du HMR en mode "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"development"}]},{"type":"text","value":", la "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"route"}]},{"type":"text","value":" actuelle, les "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"params"}]},{"type":"text","value":" de la page, la "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"query"}]},{"type":"text","value":" (URL), ainsi que la possibilité d'avoir accès à des variables d'environment à travers le contexte. En plus de cela, les modules de fonctions et les helpers peuvent être exposés à travers le contexte pour être disponibles sur les deux - côté client et serveur."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Toutes les propriétés du contexte qui sont présents par défaut"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// toujours disponibles"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    app"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    store"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    route"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    params"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    query"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    env"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    isDev"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    isHMR"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    redirect"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    error"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n   $config\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" context\n\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// disponible uniquement côté serveur"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"process"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"server"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" req"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" res"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" beforeNuxtRender "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" context\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// disponible uniquement côté client"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"process"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"client"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" nuxtState "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" context\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Le "},{"type":"element","tag":"prose-em","props":{},"children":[{"type":"text","value":"context"}]},{"type":"text","value":" dont nous parlons ici ne doit pas être confondu avec l'objet "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context"}]},{"type":"text","value":" disponible dans les "},{"type":"element","tag":"prose-a","props":{"href":"https://vuex.vuejs.org/guide/actions.html","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Actions Vuex"}]},{"type":"text","value":" ou celui disponible dans la fonction "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"build.extend"}]},{"type":"text","value":" dans notre "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"text","value":". Ils n'ont absolument aucun rapport entre eux !"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Découvrez davantage de propriétés disponibles dans le contexte dans le "},{"type":"element","tag":"prose-a","props":{"href":"/docs/internals-glossary/context"},"children":[{"type":"text","value":"Glossaire des propriétés internes"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"exemples"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#exemples"},"children":[{"type":"text","value":"Exemples"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"utiliser-les-paramètres-de-la-page-pour-notre-requête-api"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#utiliser-les-param%C3%A8tres-de-la-page-pour-notre-requ%C3%AAte-api"},"children":[{"type":"text","value":"Utiliser les paramètres de la page pour notre requête API"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Le contexte expose directement tous les paramètres dynamiques possibles de la route via "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context.params"}]},{"type":"text","value":". Dans l'exemple suivant, on appelle une API grâce au module "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt/http"}]},{"type":"text","value":" en utilisant un paramètre dynamique de la page dans l'URL. Les modules tels que "},{"type":"element","tag":"prose-a","props":{"href":"https://http.nuxtjs.org/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"nuxt/http"}]},{"type":"text","value":" peuvent exposer leurs propres fonctions qui sont par la suite disponibles à travers l'objet "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context.app"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"De plus, nous allons entourer l'appel d'API d'une instruction "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"try/catch"}]},{"type":"text","value":" pour gérer le cas d'erreurs potentielles. Avec la fonction "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context.error"}]},{"type":"text","value":", nous pouvons directement afficher la page d'erreur de Nuxt et lui passer l'erreur survenue."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"pages/posts/_id.vue"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"asyncData"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"text","value":"context"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" id "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" context"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"params"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"try"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// ici, on utilise le module nuxtjs/http disponible via context.app"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" post "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" context"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"$http"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"$get"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","template-string"]},"children":[{"type":"element","tag":"span","props":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"https://api.nuxtjs.dev/posts/"}]},{"type":"element","tag":"span","props":{"className":["token","interpolation"]},"children":[{"type":"element","tag":"span","props":{"className":["token","interpolation-punctuation","punctuation"]},"children":[{"type":"text","value":"${"}]},{"type":"text","value":"id"},{"type":"element","tag":"span","props":{"className":["token","interpolation-punctuation","punctuation"]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" post "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"error"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      context"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"error"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// affiche la page d'erreur de nuxt avec l'erreur correspondante"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Grâce à l'"},{"type":"element","tag":"prose-a","props":{"href":"https://hacks.mozilla.org/2015/05/es6-in-depth-destructuring/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"ES6"}]},{"type":"text","value":", on peut utiliser la syntaxe pour déstructurer l'objet "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context"}]},{"type":"text","value":". On peut passer les objets auxquels nous voulons avoir accès et ensuite les utiliser dans notre code sans même utiliser le mot "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"pages/posts/_id.vue"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"async"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"asyncData"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" params"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" $http"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" error "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" id "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" params"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"id"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"try"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// ici on utilise le module nuxtjs/http depuis le contexte"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" post "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"await"}]},{"type":"text","value":" $http"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"$get"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","template-string"]},"children":[{"type":"element","tag":"span","props":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"https://api.nuxtjs.dev/posts/"}]},{"type":"element","tag":"span","props":{"className":["token","interpolation"]},"children":[{"type":"element","tag":"span","props":{"className":["token","interpolation-punctuation","punctuation"]},"children":[{"type":"text","value":"${"}]},{"type":"text","value":"id"},{"type":"element","tag":"span","props":{"className":["token","interpolation-punctuation","punctuation"]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"className":["token","template-punctuation","string"]},"children":[{"type":"text","value":"`"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" post "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"error"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"error"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"error"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// affiche la page d'erreur de nuxt avec l'erreur correspondante"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Si nous préférons utiliser les paramètres de la requête, nous pouvons alors utiliser "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context.query.id"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"rediriger-les-utilisateurs-et-accéder-au-store"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#rediriger-les-utilisateurs-et-acc%C3%A9der-au-store"},"children":[{"type":"text","value":"Rediriger les utilisateurs et accéder au store"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Accéder au store Vuex (quand nous l'avons configuré dans le répertoire "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"store"}]},{"type":"text","value":") est aussi possible via le contexte. Cela fournit un objet "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"store"}]},{"type":"text","value":" qui est équivalent à "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"this.$store"}]},{"type":"text","value":" dans les composants Vue. De plus, on peut utiliser la méthode "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"redirect"}]},{"type":"text","value":", un helper disponible via le contexte, pour rediriger l'utilisateur dans le cas où le state "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"authenticated"}]},{"type":"text","value":" est "},{"type":"element","tag":"prose-a","props":{"href":"https://developer.mozilla.org/fr/docs/Glossary/Falsy","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"falsy"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"middleware"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" store"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" redirect "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// on déstructure les objets avec leurs propriétés"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" isAuthenticated "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" store"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"state"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"authenticated"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"!"}]},{"type":"text","value":"isAuthenticated"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"redirect"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'/login'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"les-helpers"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#les-helpers"},"children":[{"type":"text","value":"Les helpers"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"En plus des raccourcis dans le contexte, il y a aussi de petits helpers présents dans notre application Nuxt."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"nuxt-le-helper-nuxt"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#nuxt-le-helper-nuxt"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"$nuxt"}]},{"type":"text","value":": Le helper Nuxt"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Le helper "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"$nuxt"}]},{"type":"text","value":" est prévu pour améliorer l'expérience utilisateur et peut être une trappe de secours dans certains cas. Il est accessible via "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"this.$nuxt"}]},{"type":"text","value":" dans les composants Vue et via "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"window.$nuxt"}]},{"type":"text","value":" du côté client."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"vérification-de-la-connexion"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#v%C3%A9rification-de-la-connexion"},"children":[{"type":"text","value":"Vérification de la connexion"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Le helper "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"$nuxt"}]},{"type":"text","value":" fournit un moyen rapide pour voir si l'utilisateur a de la connexion ou pas: nous avons accès aux booléens "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"isOffline"}]},{"type":"text","value":" et "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"isOnline"}]},{"type":"text","value":". On peut utiliser ceux-ci pour montrer un message dès que l'utilisateur est hors ligne (par exemple)."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"layouts/default.vue"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-html"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"div"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","attr-name"]},"children":[{"type":"text","value":"v-if"}]},{"type":"element","tag":"span","props":{"className":["token","attr-value"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation","attr-equals"]},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":"$nuxt.isOffline"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"Vous êtes hors-ligne"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"Nuxt"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"/>"}]}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"accéder-à-linstance-racine"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#acc%C3%A9der-%C3%A0-linstance-racine"},"children":[{"type":"text","value":"Accéder à l'instance racine"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Au delà de l'aspect DX/UX, le helper "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"$nuxt"}]},{"type":"text","value":" fournit aussi un raccourci à l'instance racine de notre application à partir de n'importe quel composant. Mais ce n'est pas tout - nous pouvons aussi avoir accès au helper "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"$nuxt"}]},{"type":"text","value":" via "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"window.$nuxt"}]},{"type":"text","value":", ce qui peut être pratique comme solution de secours pour avoir accès à des méthodes de module comme "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"$axios"}]},{"type":"text","value":" depuis l'extérieur de nos composants Vue. Nous pouvons utiliser cela judicieusement et seulement en "},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"dernier recours"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"actualiser-la-data-de-la-page"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#actualiser-la-data-de-la-page"},"children":[{"type":"text","value":"Actualiser la data de la page"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Quand nous voulons actualiser la page actuelle pour l'utilisateur, nous ne voulons pas recharger la page intégralement et entraîner une nouvelle requête au serveur ainsi qu'une nouvelle initialisation de l'intégralité de notre application Nuxt. À la place, on préférera souvent juste actualiser la data, que l'on peut récupérer avec "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":" ou "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nous pouvons faire cela en utilisant "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"this.$nuxt.refresh()"}]},{"type":"text","value":" !"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-html"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"{{ content }}"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"button"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","attr-name"]},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"className":["token","attr-value"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation","attr-equals"]},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":"refresh"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"Actualiser"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"className":["token","script"]},"children":[{"type":"element","tag":"span","props":{"className":["token","language-javascript"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"asyncData"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" content"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'Créé le: '"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","class-name"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    methods"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"$nuxt"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"refresh"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"contrôler-la-barre-de-progression"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#contr%C3%B4ler-la-barre-de-progression"},"children":[{"type":"text","value":"Contrôler la barre de progression"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Avec "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"$nuxt"}]},{"type":"text","value":", nous pouvons aussi contrôler la barre de progression de manière programmatique via "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"this.$nuxt.$loading"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"mounted"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"$nextTick"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","arrow","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"$nuxt"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"$loading"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"setTimeout"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","arrow","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"$nuxt"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"$loading"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"finish"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"500"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Plus d'informations sont disponibles dans le "},{"type":"element","tag":"prose-a","props":{"href":"/docs/features/loading"},"children":[{"type":"text","value":"chapitre sur le chargement"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"le-helper-onnuxtready"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#le-helper-onnuxtready"},"children":[{"type":"text","value":"Le helper onNuxtReady"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Si nous voulons exécuter certains scripts "},{"type":"element","tag":"prose-em","props":{},"children":[{"type":"text","value":"après"}]},{"type":"text","value":" que notre application Nuxt soit chargée et prête, nous pouvons utiliser la fonction "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"window.onNuxtReady"}]},{"type":"text","value":". Cela peut être utile si nous souhaitons exécuter une fonction côté client sans augmenter le temps à l'interactivité ("},{"type":"element","tag":"prose-a","props":{"href":"https://web.dev/tti/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"TTI"}]},{"type":"text","value":")."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","dom","variable"]},"children":[{"type":"text","value":"window"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"onNuxtReady"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","arrow","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","console","class-name"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'Nuxt est monté et prêt'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"les-helpers-de-process"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#les-helpers-de-process"},"children":[{"type":"text","value":"Les helpers de Process"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nuxt injecte trois valeurs booléennes dans l'objet global "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process"}]},{"type":"text","value":", ce dernier va permettre de déterminer si l'app a été render côté serveur ou intégralement côté client, ainsi que vérifier la génération du site en version statique. Ces helpers sont disponibles à travers notre application et sont communément utilisés dans un bloc "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"asyncData"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"pages/about.vue"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-html"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"Je suis render côté {{ renderedOn }}"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"className":["token","script"]},"children":[{"type":"element","tag":"span","props":{"className":["token","language-javascript"]},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"asyncData"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" renderedOn"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" process"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"client"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"?"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'client'"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'serveur'"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Dans l'exemple, "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"renderedOn"}]},{"type":"text","value":" aura la valeur "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"'serveur'"}]},{"type":"text","value":" dans le cas d'un render côté serveur quand un utilisateur arrivera sur la page directement. Quand l'utilisateur voudra naviguer jusqu'à la page à partir d'un autre endroit de l'application, par exemple en cliquant sur un "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"<NuxtLink>"}]},{"type":"text","value":", la valeur sera à "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"'client'"}]},{"type":"text","value":"."}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"exemples","depth":2,"text":"Exemples","children":[{"id":"utiliser-les-paramètres-de-la-page-pour-notre-requête-api","depth":3,"text":"Utiliser les paramètres de la page pour notre requête API"},{"id":"rediriger-les-utilisateurs-et-accéder-au-store","depth":3,"text":"Rediriger les utilisateurs et accéder au store"}]},{"id":"les-helpers","depth":2,"text":"Les helpers"},{"id":"nuxt-le-helper-nuxt","depth":2,"text":"$nuxt: Le helper Nuxt","children":[{"id":"vérification-de-la-connexion","depth":3,"text":"Vérification de la connexion"},{"id":"accéder-à-linstance-racine","depth":3,"text":"Accéder à l'instance racine"},{"id":"actualiser-la-data-de-la-page","depth":3,"text":"Actualiser la data de la page"},{"id":"contrôler-la-barre-de-progression","depth":3,"text":"Contrôler la barre de progression"}]},{"id":"le-helper-onnuxtready","depth":2,"text":"Le helper onNuxtReady"},{"id":"les-helpers-de-process","depth":2,"text":"Les helpers de Process"}]}}}