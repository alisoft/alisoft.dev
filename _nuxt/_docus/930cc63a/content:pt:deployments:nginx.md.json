{"key":"content:pt:deployments:nginx.md","generatedAt":"2022-03-15T12:42:50.184Z","mtime":"2022-03-15T12:42:50.165Z","slug":"nginx","title":"NGINX","position":"999999999999","to":"/pt/deployments/nginx","draft":false,"page":true,"language":"en","template":"guide","description":"Como usar o nginx como um proxy reverso?","target":"Static & Server","category":"deployment","logo":{"light":"/img/companies/square/light/Nginx.svg","dark":"/img/companies/square/dark/Nginx.svg"},"empty":false,"body":{"raw":"---\ntemplate: guide\ntitle: NGINX\ndescription: Como usar o nginx como um proxy reverso?\ntarget: Static & Server\ncategory: deployment\nlogo:\n  light: \"/img/companies/square/light/Nginx.svg\"\n  dark: \"/img/companies/square/dark/Nginx.svg\"\n---\n# Usando NGINX como um proxy (buscador) reverso\n\nComo usar o nginx como um proxy reverso?\n\n---\n\n```nginx\nmap $sent_http_content_type $expires {\n    \"text/html\"                 epoch;\n    \"text/html; charset=utf-8\"  epoch;\n    default                     off;\n}\n\nserver {\n    listen          80;             # a porta do nginx está ouvindo na\n    server_name     your-domain;    # configure o seu domínio aqui\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    location / {\n        expires $expires;\n\n        proxy_redirect                      off;\n        proxy_set_header Host               $host;\n        proxy_set_header X-Real-IP          $remote_addr;\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_read_timeout          1m;\n        proxy_connect_timeout       1m;\n        proxy_pass                          http://127.0.0.1:3000; # define o endereça da instância do Node.js aqui\n    }\n}\n```\n\n## Usando nginx com páginas geradas e um cacheamento de proxy como fallback:\n\nSe você tem um website de volume alto com mudanças regular de conteúdo, você pode querer tirar vantagem das capacidades de gerar do Nuxt e [cacheamento do nginx](https://www.nginx.com/blog/nginx-caching-guide).\n\nAbaixo está um exemplo de configuração. Mantenha em mente que:\n\n- a pasta raíz deve ser a mesma que a definida pela [configuração do generate.dir](/docs/configuration-glossary/configuration-generate#dir)\n- os cabeçalhos expire definido pelo Nuxt são divididos (devido ao cache)\n- ambos Nuxt e nginx podem definir cabeçalhos adicionais, é aconselhado escolher um (se em dúvida, escolha nginx)\n- se seu site é maioritariamente estático, aumente os números do `proxy_cache_path_inactive` e `proxy_cache_valid`\n\nSe você não gerar suas rotas mas ainda deseja tirar vantagem do cache do nginx:\n\n- remova a entrada `root`\n- mude `location @proxy {` para `location / {`\n- remova as outras duas entradas de `location`\n\n```nginx\nproxy_cache_path  /data/nginx/cache levels=1:2 keys_zone=nuxt-cache:25m max_size=1g inactive=60m use_temp_path=off;\n\nmap $sent_http_content_type $expires {\n    \"text/html\"                 1h; defina isto para suas necessidades\n    \"text/html; charset=utf-8\"  1h; defina isto para suas necessidades\n    default                     7d; defina isto para suas necessidades\n}\n\nserver {\n    listen          80;             # a porta do nginx está ouvindo na\n    server_name     your-domain;    # configure o seu domínio aqui\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    charset utf-8;\n\n    root /var/www/NUXT_PROJECT_PATH/dist;\n\n    location ~* \\.(?:ico|gif|jpe?g|png|woff2?|eot|otf|ttf|svg|js|css)$ {\n        expires $expires;\n        add_header Pragma public;\n        add_header Cache-Control \"public\";\n\n        try_files $uri $uri/ @proxy;\n    }\n\n    location / {\n        expires $expires;\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\n        add_header X-Frame-Options \"SAMEORIGIN\";\n\n        try_files $uri $uri/index.html @proxy; # para generate.subFolders: true\n        # try_files $uri $uri.html @proxy; # para generate.subFolders: false\n    }\n\n    location @proxy {\n        expires $expires;\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\n        add_header X-Frame-Options \"SAMEORIGIN\";\n        add_header X-Cache-Status $upstream_cache_status;\n\n        proxy_redirect                      off;\n        proxy_set_header Host               $host;\n        proxy_set_header X-Real-IP          $remote_addr;\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_ignore_headers        Cache-Control;\n        proxy_http_version          1.1;\n        proxy_read_timeout          1m;\n        proxy_connect_timeout       1m;\n        proxy_pass                  http://127.0.0.1:3000; # define o endereça da instância do Node.js aqui\n        proxy_cache                 nuxt-cache;\n        proxy_cache_bypass          $arg_nocache; # probably better to change this\n        proxy_cache_valid           200 302  60m; # set this to your needs\n        proxy_cache_valid           404      1m;  # set this to your needs\n        proxy_cache_lock            on;\n        proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;\n        proxy_cache_key             $uri$is_args$args;\n    }\n}\n```\n\n## configuração do nginx para o Laravel Forge:\n\nMude `YOUR_WEBSITE_FOLDER` para a pasta do seu website e `YOUR_WEBSITE_DOMAIN` para a URL do seu website. O Laravel Forge terá preenchido esses valores por você mas certifique-se de consultar duas vezes.\n\n```nginx\n# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\n\nmap $sent_http_content_type $expires {\n    \"text/html\"                 epoch;\n    \"text/html; charset=utf-8\"  epoch;\n    default                     off;\n}\n\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name YOUR_WEBSITE_DOMAIN;\n\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-XSS-Protection \"1; mode=block\";\n    add_header X-Content-Type-Options \"nosniff\";\n\n    charset utf-8;\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    # CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\n\n    location / {\n        expires $expires;\n\n        proxy_redirect off;\n        proxy_set_header Host               $host;\n        proxy_set_header X-Real-IP          $remote_addr;\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_read_timeout          1m;\n        proxy_connect_timeout       1m;\n        proxy_pass                          http://127.0.0.1:3000; # define o endereço do Node.js\n    }\n\n    access_log off;\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\n\n    location ~ /\\.(?!well-known).* {\n        deny all;\n    }\n}\n\n# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n```\n\n## Segurar o Laravel Forge com TLS:\n\nÉ melhor deixar o Laravel Forge fazer a edição do `nginx.config` por você, ao clicar em Sites -> YOUR_WEBSITE_DOMAIN (SERVER_NAME) e depois clicar no SSL e instalar um certificado a partir de um dos provedores. Lembre de ativar o certificado. Seu `nginx.conf` deve agora parecer com algo como isto:\n\n```nginx\n# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\n\nmap $sent_http_content_type $expires {\n    \"text/html\"                 epoch;\n    \"text/html; charset=utf-8\"  epoch;\n    default                     off;\n}\n\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name YOUR_WEBSITE_DOMAIN;\n\n    # SSL DO FORGE (NÃO REMOVA!)\n    ssl_certificate /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.crt;\n    ssl_certificate_key /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.key;\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!3DES';\n    ssl_prefer_server_ciphers on;\n    ssl_dhparam /etc/nginx/dhparams.pem;\n\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-XSS-Protection \"1; mode=block\";\n    add_header X-Content-Type-Options \"nosniff\";\n\n    charset utf-8;\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    # FORGE CONFIG (DOT NOT REMOVE!)\n    # CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\n\n    location / {\n        expires $expires;\n\n        proxy_set_header Host               $host;\n        proxy_set_header X-Real-IP          $remote_addr;\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_redirect              off;\n        proxy_read_timeout          1m;\n        proxy_connect_timeout       1m;\n        proxy_pass                          http://127.0.0.1:3000; # define o endereço do Node.js\n    }\n\n    access_log off;\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\n\n    location ~ /\\.(?!well-known).* {\n        deny all;\n    }\n}\n\n# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n```\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"usando-nginx-como-um-proxy-buscador-reverso"},"children":[{"type":"text","value":"Usando NGINX como um proxy (buscador) reverso"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Como usar o nginx como um proxy reverso?"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-nginx","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$sent_http_content_type"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    \"text/html\"                 "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"epoch"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    \"text/html"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" charset=utf-8\"  "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"epoch"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":"                     "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"server"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"listen"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"             "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# a porta do nginx está ouvindo na"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"server_name"}]},{"type":"text","value":"     your-domain"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# configure o seu domínio aqui"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_types"}]},{"type":"text","value":"      text/plain application/xml text/css application/javascript"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_min_length"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" /"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"text","value":"                      "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" Host               "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$host"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Real-IP          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$remote_addr"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-For    "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$proxy_add_x_forwarded_for"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-Proto  "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$scheme"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_read_timeout"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_connect_timeout"}]},{"type":"text","value":"       "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"text","value":"                          http://127.0.0.1:3000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# define o endereça da instância do Node.js aqui"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"usando-nginx-com-páginas-geradas-e-um-cacheamento-de-proxy-como-fallback"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#usando-nginx-com-p%C3%A1ginas-geradas-e-um-cacheamento-de-proxy-como-fallback"},"children":[{"type":"text","value":"Usando nginx com páginas geradas e um cacheamento de proxy como fallback:"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Se você tem um website de volume alto com mudanças regular de conteúdo, você pode querer tirar vantagem das capacidades de gerar do Nuxt e "},{"type":"element","tag":"prose-a","props":{"href":"https://www.nginx.com/blog/nginx-caching-guide","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"cacheamento do nginx"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Abaixo está um exemplo de configuração. Mantenha em mente que:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"a pasta raíz deve ser a mesma que a definida pela "},{"type":"element","tag":"prose-a","props":{"href":"/docs/configuration-glossary/configuration-generate#dir"},"children":[{"type":"text","value":"configuração do generate.dir"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"os cabeçalhos expire definido pelo Nuxt são divididos (devido ao cache)"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"ambos Nuxt e nginx podem definir cabeçalhos adicionais, é aconselhado escolher um (se em dúvida, escolha nginx)"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"se seu site é maioritariamente estático, aumente os números do "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"proxy_cache_path_inactive"}]},{"type":"text","value":" e "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"proxy_cache_valid"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Se você não gerar suas rotas mas ainda deseja tirar vantagem do cache do nginx:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"remova a entrada "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"root"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"mude "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"location @proxy {"}]},{"type":"text","value":" para "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"location / {"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"remova as outras duas entradas de "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"location"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-nginx","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_path"}]},{"type":"text","value":"  /data/nginx/cache levels=1:2 keys_zone=nuxt-cache:25m max_size=1g inactive=60m use_temp_path=off"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$sent_http_content_type"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    \"text/html\"                 "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"1h"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"defina"}]},{"type":"text","value":" isto para suas necessidades\n    "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"text/html; charset=utf-8\""}]},{"type":"text","value":"  "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1h"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"defina"}]},{"type":"text","value":" isto para suas necessidades\n    default                     "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"7d"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" defina isto para suas necessidades\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"server"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"listen"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"             "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# a porta do nginx está ouvindo na"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"server_name"}]},{"type":"text","value":"     your-domain"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# configure o seu domínio aqui"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_types"}]},{"type":"text","value":"      text/plain application/xml text/css application/javascript"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_min_length"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset"}]},{"type":"text","value":" utf-8"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"root"}]},{"type":"text","value":" /var/www/NUXT_PROJECT_PATH/dist"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" ~* \\.(?:ico|gif|jpe?g|png|woff2?|eot|otf|ttf|svg|js|css)$"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Pragma public"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Cache-Control "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"public\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"try_files"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"text","value":"/ @proxy"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" /"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Content-Security-Policy "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"default-src 'self' 'unsafe-inline';\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Strict-Transport-Security "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"max-age=31536000; includeSubDomains; preload\""}]},{"type":"text","value":" always"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Frame-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"SAMEORIGIN\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"try_files"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"text","value":"/index.html @proxy"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# para generate.subFolders: true"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# try_files $uri $uri.html @proxy; # para generate.subFolders: false"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" @proxy"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Content-Security-Policy "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"default-src 'self' 'unsafe-inline';\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Strict-Transport-Security "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"max-age=31536000; includeSubDomains; preload\""}]},{"type":"text","value":" always"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Frame-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"SAMEORIGIN\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Cache-Status "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$upstream_cache_status"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"text","value":"                      "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" Host               "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$host"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Real-IP          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$remote_addr"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-For    "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$proxy_add_x_forwarded_for"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-Proto  "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$scheme"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_ignore_headers"}]},{"type":"text","value":"        Cache-Control"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_http_version"}]},{"type":"text","value":"          1.1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_read_timeout"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_connect_timeout"}]},{"type":"text","value":"       "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"text","value":"                  http://127.0.0.1:3000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# define o endereça da instância do Node.js aqui"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache"}]},{"type":"text","value":"                 nuxt-cache"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_bypass"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$arg_nocache"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# probably better to change this"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_valid"}]},{"type":"text","value":"           "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"200"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"302"}]},{"type":"text","value":"  "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"60m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set this to your needs"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_valid"}]},{"type":"text","value":"           "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"404"}]},{"type":"text","value":"      "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set this to your needs"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_lock"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_use_stale"}]},{"type":"text","value":" error timeout http_500 http_502 http_503 http_504"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_key"}]},{"type":"text","value":"             "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$is_args"}]},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$args"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"configuração-do-nginx-para-o-laravel-forge"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#configura%C3%A7%C3%A3o-do-nginx-para-o-laravel-forge"},"children":[{"type":"text","value":"configuração do nginx para o Laravel Forge:"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Mude "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"YOUR_WEBSITE_FOLDER"}]},{"type":"text","value":" para a pasta do seu website e "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"YOUR_WEBSITE_DOMAIN"}]},{"type":"text","value":" para a URL do seu website. O Laravel Forge terá preenchido esses valores por você mas certifique-se de consultar duas vezes."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-nginx","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/before/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$sent_http_content_type"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    \"text/html\"                 "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"epoch"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    \"text/html"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset=utf-8\""}]},{"type":"text","value":"  epoch;\n    default                     off;\n}\n\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name YOUR_WEBSITE_DOMAIN;\n\n    add_header X-Frame-Options \"SAMEORIGIN"},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\";\n    add_header X-XSS-Protection \""}]},{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" mode=block\""},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Content-Type-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nosniff\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset"}]},{"type":"text","value":" utf-8"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_types"}]},{"type":"text","value":"      text/plain application/xml text/css application/javascript"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_min_length"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/server/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" /"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" Host               "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$host"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Real-IP          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$remote_addr"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-For    "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$proxy_add_x_forwarded_for"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-Proto  "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$scheme"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_read_timeout"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_connect_timeout"}]},{"type":"text","value":"       "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"text","value":"                          http://127.0.0.1:3000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# define o endereço do Node.js"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"access_log"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"error_log"}]},{"type":"text","value":"  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" ~ /\\.(?!well-known).*"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"deny"}]},{"type":"text","value":" all"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/after/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"segurar-o-laravel-forge-com-tls"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#segurar-o-laravel-forge-com-tls"},"children":[{"type":"text","value":"Segurar o Laravel Forge com TLS:"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"É melhor deixar o Laravel Forge fazer a edição do "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nginx.config"}]},{"type":"text","value":" por você, ao clicar em Sites -> YOUR_WEBSITE_DOMAIN (SERVER_NAME) e depois clicar no SSL e instalar um certificado a partir de um dos provedores. Lembre de ativar o certificado. Seu "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nginx.conf"}]},{"type":"text","value":" deve agora parecer com algo como isto:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-nginx","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/before/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$sent_http_content_type"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    \"text/html\"                 "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"epoch"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    \"text/html"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset=utf-8\""}]},{"type":"text","value":"  epoch;\n    default                     off;\n}\n\nserver {\n    listen "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"443"}]},{"type":"text","value":" ssl http2;\n    listen [::]:443 ssl http2;\n    server_name YOUR_WEBSITE_DOMAIN;\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# SSL DO FORGE (NÃO REMOVA!)"}]},{"type":"text","value":"\n    ssl_certificate /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.crt;\n    ssl_certificate_key /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.key;\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!3DES'"}]},{"type":"text","value":";\n    ssl_prefer_server_ciphers on;\n    ssl_dhparam /etc/nginx/dhparams.pem;\n\n    add_header X-Frame-Options \"SAMEORIGIN"},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\";\n    add_header X-XSS-Protection \""}]},{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" mode=block\""},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Content-Type-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nosniff\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset"}]},{"type":"text","value":" utf-8"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_types"}]},{"type":"text","value":"      text/plain application/xml text/css application/javascript"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_min_length"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/server/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" /"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" Host               "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$host"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Real-IP          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$remote_addr"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-For    "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$proxy_add_x_forwarded_for"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-Proto  "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$scheme"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"text","value":"              "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_read_timeout"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_connect_timeout"}]},{"type":"text","value":"       "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"text","value":"                          http://127.0.0.1:3000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# define o endereço do Node.js"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"access_log"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"error_log"}]},{"type":"text","value":"  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" ~ /\\.(?!well-known).*"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"deny"}]},{"type":"text","value":" all"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# CONFIGURAÇÃO DO FORGE (NÃO REMOVA!)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/after/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"}]}]}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"usando-nginx-com-páginas-geradas-e-um-cacheamento-de-proxy-como-fallback","depth":2,"text":"Usando nginx com páginas geradas e um cacheamento de proxy como fallback:"},{"id":"configuração-do-nginx-para-o-laravel-forge","depth":2,"text":"configuração do nginx para o Laravel Forge:"},{"id":"segurar-o-laravel-forge-com-tls","depth":2,"text":"Segurar o Laravel Forge com TLS:"}]}}}