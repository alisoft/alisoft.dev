{"key":"content:ja:deployments:github-pages.md","generatedAt":"2022-03-15T12:42:48.085Z","mtime":"2022-03-15T12:42:48.064Z","slug":"github-pages","title":"GitHub Pages","position":"999999990000","to":"/deployments/github-pages","draft":false,"page":true,"language":"ja","template":"guide","description":"Nuxt アプリケーションを GitHub Pages でどうやってデプロイするのか？","target":"Static","category":"deployment","logo":{"light":"/img/companies/square/light/Github_Pages.svg","dark":"/img/companies/square/dark/Github_Pages.svg"},"empty":false,"body":{"raw":"---\ntemplate: guide\ntitle: GitHub Pages\ndescription: Nuxt アプリケーションを GitHub Pages でどうやってデプロイするのか？\ntarget: Static\ncategory: deployment\nlogo:\n  light: \"/img/companies/square/light/Github_Pages.svg\"\n  dark: \"/img/companies/square/dark/Github_Pages.svg\"\n---\n# GitHub Pages で Nuxt をデプロイする\n\nNuxt アプリケーションを GitHub Pages でどうやってデプロイするのか？\n\n---\n\nNuxtは、例えば [GitHub Pages](https://pages.github.com/) のような任意の静的ホスティング上で Web アプリケーションのホストすることができます。\n\nGitHub Pages 上にデプロイするために、静的 Web アプリケーションを生成する必要があります：\n\n```bash\nnpm run generate\n```\n\nこれにより、`dist` フォルダが作成され、その中には GitHub Pages のホスティングにデプロイするためのすべてのものが入っています。プロジェクトのリポジトリにはブランチ `gh-pages` を、ユーザーや組織サイトにはブランチ `master` を指定します。\n\n::alert{type=\"info\"}\n<b>情報:</b> GitHub Pages のカスタムドメインを使用し、`CNAME` ファイルを設置する場合は、`static` ディレクトリに CNAME ファイルを設置することを推奨します。これについては、[より詳細なドキュメント](/docs/directory-structure/static)を参照してください。\n::\n\n## リポジトリを GitHub Pages にデプロイする\n\nまず、GitHub pages でホストしているため、[static target](/docs/features/deployment-targets)を使用していることを確認してください：\n\n```js[nuxt.config.js]\nexport default {\n  target: 'static'\n}\n```\n\n特定のリポジトリ用に GitHub Pages を作成し、カスタムドメインを持たない場合、ページの URL は次のような形式になります。`http://<ユーザー名>.github.io/<リポジトリ名>` となります。\n\n[router base](/docs/configuration-glossary/configuration-router)を追加せずに `dist` フォルダをデプロイした場合、デプロイされたサイトにアクセスすると、アセットが不足しているためにサイトが動作していないことがわかります。これは、ウェブサイトのルートが `/` であると仮定しているが、この場合は `/<リポジトリ名>` であるためです。\n\nこの問題を解決するには、[router base](/docs/configuration-glossary/configuration-router#base) という設定を `nuxt.config.js` に追加する必要があります：\n\n```js[nuxt.config.js]\nexport default {\n  target: 'static',\n  router: {\n    base: '/<repository-name>/'\n  }\n}\n```\n\nこうすることで、生成されたパスアセットの先頭にはすべて `/<リポジトリ名>/` が付き、次にコードをリポジトリの GitHub Pages にデプロイしたときに、サイトが正しく動作するようになります。\n\n## コマンドラインによるデプロイ\n\n[push-dir パッケージ](https://github.com/L33T-KR3W/push-dir)も使うことができます：\n\nまず npm でそれをインストールします：\n\n```bash\nnpm install push-dir --save-dev\n```\n\nプロジェクトのリポジトリであればブランチを `gh-pages` に、ユーザーや組織のサイトであればブランチを `master` として、`package.json` に `deploy` コマンドを追加してください。\n\n```js\n\"scripts\": {\n  \"dev\": \"nuxt\",\n  \"generate\": \"nuxt generate\",\n  \"start\": \"nuxt start\",\n  \"deploy\": \"push-dir --dir=dist --branch=gh-pages --cleanup\"\n},\n```\n\nその後、静的なアプリケーションを生成し、デプロイします：\n\n```bash\nnpm run generate\nnpm run deploy\n```\n\n## ビルドサーバーのデプロイ\n\nデプロイメントをさらに一歩進めて、手動でローカルインストールからファイルをコンパイルしてデプロイするのではなく、ビルドサーバーを利用して GitHub リポジトリの新しいコミットを監視し、自動的にチェックアウト、コンパイル、デプロイを行うことができます。\n\n### GitHub Actions\n\nGitHub を使ったソフトウェア自動化のための公式ツールである [GitHub Actions](https://github.com/features/actions) を使ってデプロイするためには、ワークフローを持っていない場合、新しいワークフローを作成するか、既存のワークフローに新しいステップを追加する必要があります。\n\nこれは、[GitHub Pages Action](https://github.com/marketplace/actions/github-pages-action)を使用しており、生成されたファイルを `dist` フォルダからデフォルトの GitHub Pages ブランチ `gh-pages` にプッシュします。\n\n既存のワークフローで、次のステップを追加します：\n\n```yaml\n- name: Deploy\n  uses: peaceiris/actions-gh-pages@v3\n  with:\n    github_token: ${{ secrets.GITHUB_TOKEN }}\n    publish_dir: ./dist\n```\n\n新しいワークフローでは、以下の内容を `.github/workflows` ディレクトリの `cd.yml` という新しいファイルに貼り付けます：\n\n```yaml\nname: cd\n\non: [push, pull_request]\n\njobs:\n  cd:\n    runs-on: ${{ matrix.os }}\n\n    strategy:\n      matrix:\n        os: [ubuntu-latest]\n        node: [14]\n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@master\n\n      - name: Setup node env\n        uses: actions/setup-node@v2.1.2\n        with:\n          node-version: ${{ matrix.node }}\n\n      - name: Install dependencies\n        run: yarn\n\n      - name: Generate\n        run: yarn run generate\n\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./dist\n```\n\nそして、これを自分のリポジトリにコミットします：\n\n```bash\ngit add .github/workflows/cd.yml\ngit commit -m \"Adding github pages deploy workflow\"\ngit push origin\n```\n\n完了すると、`gh-pages` ブランチが更新され、サイトも更新されているのがわかります。\n\n### Travis CI\n\nオープンソースプロジェクト向けの無料ビルドサーバーである [Travis CI](https://travis-ci.org/) を使ってデプロイするには、GitHub アカウントでサインインし、Travis にリポジトリを閲覧する権限を与え、表示されたリストのリポジトリ名の横にあるスイッチを切り替えて、リポジトリのビルドサーバーを有効にします。\n\n![Travis Builder Server Enable](/img/docs/github_pages_travis_01.png)\n\n次に、リポジトリ名の横にある歯車のアイコンをクリックして、ビルドサーバの一般的な設定を行い、スイッチを切り替えて 'Build only if .travis.yml is present' 機能を有効にします。\n\n![Travis Builder Server Settings](/img/docs/github_pages_travis_02.png)\n\n同じ画面で Environment Variables セクションにスクロールダウンし、`GITHUB_ACCESS_TOKEN` という名前の新しい変数を作成します。値の欄には、先ほど作成した GitHub パーソナルアクセストークンのコピーを貼り付けて、'Add' ボタンをクリックします。\n\n![Travis Builder Server Environment Variables](/img/docs/github_pages_travis_03.png)\n\n最後に、リポジトリのルートに以下の内容の `.travis.yml` 設定ファイルを作成します。\n\n```yaml\nlanguage: node_js\nnode_js:\n  - '12'\n\ncache:\n  directories:\n    - 'node_modules'\n\nbranches:\n  only:\n    - master\n\ninstall:\n  - npm install\n  - npm run generate\n\nscript:\n  - echo \"Skipping tests\"\n\ndeploy:\n  provider: pages\n  skip-cleanup: true\n  github-token: $GITHUB_ACCESS_TOKEN # travis-ci.orgのダッシュボードに設定され、安全とマークされます https://docs.travis-ci.com/user/deployment/pages/#Setting-the-GitHub-token\n  target-branch: gh-pages\n  local-dir: dist\n  on:\n    branch: master\n```\n\nそして、これをリポジトリにコミットします\n\n```bash\ngit add .travis.yml\ngit commit -m \"Adding travis deploy configuration\"\ngit push origin\n```\n\nこれで、リポジトリに何か変更をコミットすると、Travis の中で、新しいビルドが開始されます\n\n![Travis Builder Server Output](/img/docs/github_pages_travis_04.png)\n\nそして完了すると、GitHub pages のサイトが自動的に更新されているのがわかります。\n\n### Appveyor\n\nオープンソースプロジェクト向けの無料ビルドサーバーである [Appveyor](https://www.appveyor.com) を使ってデプロイするには、新規アカウントにサインアップし、GitHub 認証オプションを選択して、GitHub アカウントを使ってサインインします。\n\n一度サインインしたら、'New project' リンクをクリックし、表示されたリストのリポジトリ名の横にある 'Add' ボタンをクリックして、リポジトリのビルドサーバーを有効にします。\n\n![Appveyor Builder Server Enable](/img/docs/github_pages_appveyor_01.png)\n\n次に、リポジトリのルートに、以下の内容の `appveyor.yml` 設定ファイルを作成します\n\n```yaml\nenvironment:\n  # Nuxtにはnode v12以上が必要です\n  nodejs_version: '12'\n  # 機密データの暗号化 (https://ci.appveyor.com/tools/encrypt)\n  github_access_token:\n    secure: ENCRYPTED_GITHUB_ACCESS_TOKEN\n  github_email:\n    secure: ENCRYPTED_GITHUB_EMAIL\n\n# master ブランチでのみ実行\nbranches:\n  only:\n    - master\n\n# インストールスクリプト (repoのクローニング後に実行されます)\ninstall:\n  # nodejs バージョンをスイッチ\n  - ps: Install-Product node $env:nodejs_version\n  # モジュールをインストール\n  - npm install\n  # 静的ファイルを生成\n  - npm run generate\n  # グローバル git クレデンシャルストアの設定 (https://www.appveyor.com/docs/how-to/git-push/)\n  - git config --global credential.helper store\n  - ps: Add-Content \"$env:USERPROFILE\\.git-credentials\" \"https://$($env:github_access_token):x-oauth-basic@github.com`n\"\n  - git config --global user.email $env:github_email\n  # GitHub pages へのデプロイ\n  - npm run deploy\n\n# テストを実行しない\ntest: off\n\n# 実際にはビルドしない\nbuild: off\n```\n\n**_NB_** この設定では、[コマンドラインによるデプロイ](#command-line-deployment)の指示に従って、`package.json` ファイルが設定されていることを前提としています。\n\nただし、このファイルをコミットする前に、`ENCRYPTED_GITHUB_ACCESS_TOKEN` と `ENCRYPTED_GITHUB_EMAIL` 変数に、先ほどの GitHub パーソナルアクセストークンと、[Appveyor encryption tool](https://ci.appveyor.com/tools/encrypt)を使って暗号化した GitHub のメールアドレスを設定しておく必要があります。\n\n一度更新したら、そのファイルをリポジトリにコミットします\n\n```bash\ngit add appveyor.yml\ngit commit -m \"Adding appveyor deploy configuration\"\ngit push origin\n```\n\nこれで、Appveyor 内でリポジトリに変更をコミットすると、新しいビルドが開始されることになります\n\n![Appveyor Builder Server Output](/img/docs/github_pages_appveyor_02.png)\n\n完了すると、GitHub pages のサイトが自動的に更新されているのがわかります。\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"github-pages-で-nuxt-をデプロイする"},"children":[{"type":"text","value":"GitHub Pages で Nuxt をデプロイする"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Nuxt アプリケーションを GitHub Pages でどうやってデプロイするのか？"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nuxtは、例えば "},{"type":"element","tag":"prose-a","props":{"href":"https://pages.github.com/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"GitHub Pages"}]},{"type":"text","value":" のような任意の静的ホスティング上で Web アプリケーションのホストすることができます。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"GitHub Pages 上にデプロイするために、静的 Web アプリケーションを生成する必要があります："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" run generate\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"これにより、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dist"}]},{"type":"text","value":" フォルダが作成され、その中には GitHub Pages のホスティングにデプロイするためのすべてのものが入っています。プロジェクトのリポジトリにはブランチ "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"gh-pages"}]},{"type":"text","value":" を、ユーザーや組織サイトにはブランチ "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"master"}]},{"type":"text","value":" を指定します。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"type":"info"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"b","props":{},"children":[{"type":"text","value":"情報:"}]},{"type":"text","value":" GitHub Pages のカスタムドメインを使用し、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"CNAME"}]},{"type":"text","value":" ファイルを設置する場合は、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" ディレクトリに CNAME ファイルを設置することを推奨します。これについては、"},{"type":"element","tag":"prose-a","props":{"href":"/docs/directory-structure/static"},"children":[{"type":"text","value":"より詳細なドキュメント"}]},{"type":"text","value":"を参照してください。"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"リポジトリを-github-pages-にデプロイする"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%82%92-github-pages-%E3%81%AB%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%99%E3%82%8B"},"children":[{"type":"text","value":"リポジトリを GitHub Pages にデプロイする"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"まず、GitHub pages でホストしているため、"},{"type":"element","tag":"prose-a","props":{"href":"/docs/features/deployment-targets"},"children":[{"type":"text","value":"static target"}]},{"type":"text","value":"を使用していることを確認してください："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  target"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'static'"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"特定のリポジトリ用に GitHub Pages を作成し、カスタムドメインを持たない場合、ページの URL は次のような形式になります。"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"http://<ユーザー名>.github.io/<リポジトリ名>"}]},{"type":"text","value":" となります。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-a","props":{"href":"/docs/configuration-glossary/configuration-router"},"children":[{"type":"text","value":"router base"}]},{"type":"text","value":"を追加せずに "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dist"}]},{"type":"text","value":" フォルダをデプロイした場合、デプロイされたサイトにアクセスすると、アセットが不足しているためにサイトが動作していないことがわかります。これは、ウェブサイトのルートが "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"/"}]},{"type":"text","value":" であると仮定しているが、この場合は "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"/<リポジトリ名>"}]},{"type":"text","value":" であるためです。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"この問題を解決するには、"},{"type":"element","tag":"prose-a","props":{"href":"/docs/configuration-glossary/configuration-router#base"},"children":[{"type":"text","value":"router base"}]},{"type":"text","value":" という設定を "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"text","value":" に追加する必要があります："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  target"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'static'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  router"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    base"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'/<repository-name>/'"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"こうすることで、生成されたパスアセットの先頭にはすべて "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"/<リポジトリ名>/"}]},{"type":"text","value":" が付き、次にコードをリポジトリの GitHub Pages にデプロイしたときに、サイトが正しく動作するようになります。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"コマンドラインによるデプロイ"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%AB%E3%82%88%E3%82%8B%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4"},"children":[{"type":"text","value":"コマンドラインによるデプロイ"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-a","props":{"href":"https://github.com/L33T-KR3W/push-dir","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"push-dir パッケージ"}]},{"type":"text","value":"も使うことができます："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"まず npm でそれをインストールします："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" push-dir --save-dev\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"プロジェクトのリポジトリであればブランチを "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"gh-pages"}]},{"type":"text","value":" に、ユーザーや組織のサイトであればブランチを "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"master"}]},{"type":"text","value":" として、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":" に "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"deploy"}]},{"type":"text","value":" コマンドを追加してください。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"dev\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nuxt\""}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"generate\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nuxt generate\""}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"start\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nuxt start\""}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"deploy\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"push-dir --dir=dist --branch=gh-pages --cleanup\""}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"その後、静的なアプリケーションを生成し、デプロイします："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" run generate\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" run deploy\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"ビルドサーバーのデプロイ"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#%E3%83%93%E3%83%AB%E3%83%89%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4"},"children":[{"type":"text","value":"ビルドサーバーのデプロイ"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"デプロイメントをさらに一歩進めて、手動でローカルインストールからファイルをコンパイルしてデプロイするのではなく、ビルドサーバーを利用して GitHub リポジトリの新しいコミットを監視し、自動的にチェックアウト、コンパイル、デプロイを行うことができます。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"github-actions"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#github-actions"},"children":[{"type":"text","value":"GitHub Actions"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"GitHub を使ったソフトウェア自動化のための公式ツールである "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/features/actions","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"GitHub Actions"}]},{"type":"text","value":" を使ってデプロイするためには、ワークフローを持っていない場合、新しいワークフローを作成するか、既存のワークフローに新しいステップを追加する必要があります。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"これは、"},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/marketplace/actions/github-pages-action","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"GitHub Pages Action"}]},{"type":"text","value":"を使用しており、生成されたファイルを "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dist"}]},{"type":"text","value":" フォルダからデフォルトの GitHub Pages ブランチ "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"gh-pages"}]},{"type":"text","value":" にプッシュします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"既存のワークフローで、次のステップを追加します："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-yaml"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Deploy\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" peaceiris/actions"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"gh"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"pages@v3\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"github_token"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" secrets.GITHUB_TOKEN "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"publish_dir"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ./dist\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"新しいワークフローでは、以下の内容を "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".github/workflows"}]},{"type":"text","value":" ディレクトリの "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"cd.yml"}]},{"type":"text","value":" という新しいファイルに貼り付けます："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-yaml"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" cd\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"push"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" pull_request"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"jobs"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"cd"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"runs-on"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" matrix.os "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"strategy"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"matrix"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"os"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"ubuntu"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"latest"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"14"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"steps"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Checkout\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" actions/checkout@master\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Setup node env\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" actions/setup"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"node@v2.1.2\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node-version"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" matrix.node "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Install dependencies\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" yarn\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Generate\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" yarn run generate\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Deploy\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" peaceiris/actions"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"gh"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"pages@v3\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"github_token"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" secrets.GITHUB_TOKEN "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"publish_dir"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ./dist\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"そして、これを自分のリポジトリにコミットします："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" .github/workflows/cd.yml\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" commit -m "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"Adding github pages deploy workflow\""}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push origin\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"完了すると、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"gh-pages"}]},{"type":"text","value":" ブランチが更新され、サイトも更新されているのがわかります。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"travis-ci"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#travis-ci"},"children":[{"type":"text","value":"Travis CI"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"オープンソースプロジェクト向けの無料ビルドサーバーである "},{"type":"element","tag":"prose-a","props":{"href":"https://travis-ci.org/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Travis CI"}]},{"type":"text","value":" を使ってデプロイするには、GitHub アカウントでサインインし、Travis にリポジトリを閲覧する権限を与え、表示されたリストのリポジトリ名の横にあるスイッチを切り替えて、リポジトリのビルドサーバーを有効にします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"Travis Builder Server Enable","src":"/img/docs/github_pages_travis_01.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"次に、リポジトリ名の横にある歯車のアイコンをクリックして、ビルドサーバの一般的な設定を行い、スイッチを切り替えて 'Build only if .travis.yml is present' 機能を有効にします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"Travis Builder Server Settings","src":"/img/docs/github_pages_travis_02.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"同じ画面で Environment Variables セクションにスクロールダウンし、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"GITHUB_ACCESS_TOKEN"}]},{"type":"text","value":" という名前の新しい変数を作成します。値の欄には、先ほど作成した GitHub パーソナルアクセストークンのコピーを貼り付けて、'Add' ボタンをクリックします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"Travis Builder Server Environment Variables","src":"/img/docs/github_pages_travis_03.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"最後に、リポジトリのルートに以下の内容の "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".travis.yml"}]},{"type":"text","value":" 設定ファイルを作成します。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-yaml"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"language"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" node_js\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node_js"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'12'"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"cache"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"directories"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'node_modules'"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branches"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"only"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" master\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm install\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm run generate\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" echo \"Skipping tests\"\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"deploy"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"provider"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" pages\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"skip-cleanup"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"github-token"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $GITHUB_ACCESS_TOKEN "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# travis-ci.orgのダッシュボードに設定され、安全とマークされます https://docs.travis-ci.com/user/deployment/pages/#Setting-the-GitHub-token"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"target-branch"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" gh"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"pages\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"local-dir"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" dist\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branch"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" master\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"そして、これをリポジトリにコミットします"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" .travis.yml\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" commit -m "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"Adding travis deploy configuration\""}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push origin\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"これで、リポジトリに何か変更をコミットすると、Travis の中で、新しいビルドが開始されます"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"Travis Builder Server Output","src":"/img/docs/github_pages_travis_04.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"そして完了すると、GitHub pages のサイトが自動的に更新されているのがわかります。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"appveyor"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#appveyor"},"children":[{"type":"text","value":"Appveyor"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"オープンソースプロジェクト向けの無料ビルドサーバーである "},{"type":"element","tag":"prose-a","props":{"href":"https://www.appveyor.com","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Appveyor"}]},{"type":"text","value":" を使ってデプロイするには、新規アカウントにサインアップし、GitHub 認証オプションを選択して、GitHub アカウントを使ってサインインします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"一度サインインしたら、'New project' リンクをクリックし、表示されたリストのリポジトリ名の横にある 'Add' ボタンをクリックして、リポジトリのビルドサーバーを有効にします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"Appveyor Builder Server Enable","src":"/img/docs/github_pages_appveyor_01.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"次に、リポジトリのルートに、以下の内容の "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"appveyor.yml"}]},{"type":"text","value":" 設定ファイルを作成します"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-yaml"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"environment"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# Nuxtにはnode v12以上が必要です"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"nodejs_version"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'12'"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# 機密データの暗号化 (https://ci.appveyor.com/tools/encrypt)"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"github_access_token"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"secure"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ENCRYPTED_GITHUB_ACCESS_TOKEN\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"github_email"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"secure"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" ENCRYPTED_GITHUB_EMAIL\n\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# master ブランチでのみ実行"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branches"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"only"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" master\n\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# インストールスクリプト (repoのクローニング後に実行されます)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"install"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# nodejs バージョンをスイッチ"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"ps"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Install"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"Product node $env"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"nodejs_version\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# モジュールをインストール"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm install\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# 静的ファイルを生成"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm run generate\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# グローバル git クレデンシャルストアの設定 (https://www.appveyor.com/docs/how-to/git-push/)"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" git config "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"global credential.helper store\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"ps"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Add"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"Content \"$env"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"USERPROFILE\\.git"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"credentials\" \"https"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//$($env"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"github_access_token)"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"x"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"oauth"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"basic@github.com`n\"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" git config "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"global user.email $env"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"github_email\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# GitHub pages へのデプロイ"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" npm run deploy\n\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# テストを実行しない"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" off\n\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# 実際にはビルドしない"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"build"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" off\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"element","tag":"prose-em","props":{},"children":[{"type":"text","value":"NB"}]}]},{"type":"text","value":" この設定では、"},{"type":"element","tag":"prose-a","props":{"href":"#command-line-deployment"},"children":[{"type":"text","value":"コマンドラインによるデプロイ"}]},{"type":"text","value":"の指示に従って、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":" ファイルが設定されていることを前提としています。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"ただし、このファイルをコミットする前に、"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"ENCRYPTED_GITHUB_ACCESS_TOKEN"}]},{"type":"text","value":" と "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"ENCRYPTED_GITHUB_EMAIL"}]},{"type":"text","value":" 変数に、先ほどの GitHub パーソナルアクセストークンと、"},{"type":"element","tag":"prose-a","props":{"href":"https://ci.appveyor.com/tools/encrypt","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Appveyor encryption tool"}]},{"type":"text","value":"を使って暗号化した GitHub のメールアドレスを設定しておく必要があります。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"一度更新したら、そのファイルをリポジトリにコミットします"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" appveyor.yml\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" commit -m "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"Adding appveyor deploy configuration\""}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push origin\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"これで、Appveyor 内でリポジトリに変更をコミットすると、新しいビルドが開始されることになります"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"Appveyor Builder Server Output","src":"/img/docs/github_pages_appveyor_02.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"完了すると、GitHub pages のサイトが自動的に更新されているのがわかります。"}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"リポジトリを-github-pages-にデプロイする","depth":2,"text":"リポジトリを GitHub Pages にデプロイする"},{"id":"コマンドラインによるデプロイ","depth":2,"text":"コマンドラインによるデプロイ"},{"id":"ビルドサーバーのデプロイ","depth":2,"text":"ビルドサーバーのデプロイ","children":[{"id":"github-actions","depth":3,"text":"GitHub Actions"},{"id":"travis-ci","depth":3,"text":"Travis CI"},{"id":"appveyor","depth":3,"text":"Appveyor"}]}]}}}