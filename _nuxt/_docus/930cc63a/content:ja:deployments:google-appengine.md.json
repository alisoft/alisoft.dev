{"key":"content:ja:deployments:google-appengine.md","generatedAt":"2022-03-15T12:42:48.090Z","mtime":"2022-03-15T12:42:48.085Z","slug":"google-appengine","title":"Google App Engine","position":"999999990000","to":"/deployments/google-appengine","draft":false,"page":true,"language":"ja","template":"guide","description":"Nuxt を Google App Engine にどうやってデプロイするのか？","target":"Server","category":"deployment","logo":{"light":"/img/companies/square/light/Google_engine_app.svg","dark":"/img/companies/square/dark/Google_engine_app.svg"},"empty":false,"body":{"raw":"---\ntemplate: guide\ntitle: Google App Engine\ndescription: Nuxt を Google App Engine にどうやってデプロイするのか？\ntarget: Server\ncategory: deployment\nlogo:\n  light: \"/img/companies/square/light/Google_engine_app.svg\"\n  dark: \"/img/companies/square/dark/Google_engine_app.svg\"\n---\n# Nuxt を Google App Engine へデプロイする\n\nNuxt を Google App Engine にどうやってデプロイするのか？\n\n---\n\n[Google App Engine](https://cloud.google.com/appengine/) へのデプロイは Google のクラウドサービスで一般的な Nuxt アプリケーションをホストするための迅速で簡単な解決策です。\n\nこのガイドでは、アプリケーションをローカルに構築し、かつプロジェクトフォルダ全体を Google App Engine に簡単にアップロードするまでを行います。アップロード後、Google App Engine は自動的に package.json の `start` スクリプトを起動し、アプリケーションはすぐに利用可能になります。\n\n## はじめに\n\nGoogle Cloud アカウントがあるか、プロジェクトと空の Google App Engine を [Google App Engine](https://cloud.google.com/appengine/) にセットアップしているか確認して下さい。さらに[こちら](https://cloud.google.com/sdk/)で説明されているように、Google から Cloud SDK (CLI) をダウンロードしてインストールし、Google Cloud Account でログインして下さい。\n\n## アプリケーションの設定\n\n一般的な Nuxt アプリーションを App Engine へデプロイするために追加する必要があるのは `app.yaml` と呼ばれるファイルだけです。ルートプロジェクトディレクトリにその名前の新しいファイルを作成し、以下の内容を追加してください：\n\n```yaml\nruntime: nodejs10\n\ninstance_class: F2\n\nhandlers:\n  - url: /_nuxt\n    static_dir: .nuxt/dist/client\n    secure: always\n\n  - url: /(.*\\.(gif|png|jpg|ico|txt))$\n    static_files: static/\\1\n    upload: static/.*\\.(gif|png|jpg|ico|txt)$\n    secure: always\n\n  - url: /.*\n    script: auto\n    secure: always\n\nenv_variables:\n  HOST: '0.0.0.0'\n```\n\nまたフレキシブルな環境の場合、最小構成は以下になります：\n\n```yaml\nruntime: nodejs\nenv: flex\n```\n\n## アプリケーションのビルドとデプロイ\n\n次にアプリケーションを `npm run build` か `yarn build` でビルドします。\n\n現時点で、アプリケーションは Google App Engine にアップロードされる準備ができています。以下のコマンドを実行してください：\n\n```\ngcloud app deploy app.yaml --project [project-id]\n```\n\nほら！今 Nuxt アプリケーションは Google App Engine にホストされています！\n\n## さらなる詳細情報\n\n- app.yaml ファイルの `instance_class` 属性はアプリケーションインスタンスのクラスをセットします。F2 インスタンスは完全に無料ではなく、しかし Nuxt アプリケーションの実行に必要な最小のメモリを備えています。\n- package.json の `start` はデプロイ後に実行するコマンドであることを確認してください。もし普段 `start:prod`、もしくは他のコマンドで実行しているなら、アプリケーションは期待していたように働かないでしょう。\n\ndeploy コマンドには `project-name` ではなく `project-id` を指定しているか確認してください。これら 2 つは異なるものですが混合しやすいです。\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"nuxt-を-google-app-engine-へデプロイする"},"children":[{"type":"text","value":"Nuxt を Google App Engine へデプロイする"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Nuxt を Google App Engine にどうやってデプロイするのか？"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-a","props":{"href":"https://cloud.google.com/appengine/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Google App Engine"}]},{"type":"text","value":" へのデプロイは Google のクラウドサービスで一般的な Nuxt アプリケーションをホストするための迅速で簡単な解決策です。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"このガイドでは、アプリケーションをローカルに構築し、かつプロジェクトフォルダ全体を Google App Engine に簡単にアップロードするまでを行います。アップロード後、Google App Engine は自動的に package.json の "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"start"}]},{"type":"text","value":" スクリプトを起動し、アプリケーションはすぐに利用可能になります。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"はじめに"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB"},"children":[{"type":"text","value":"はじめに"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Google Cloud アカウントがあるか、プロジェクトと空の Google App Engine を "},{"type":"element","tag":"prose-a","props":{"href":"https://cloud.google.com/appengine/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Google App Engine"}]},{"type":"text","value":" にセットアップしているか確認して下さい。さらに"},{"type":"element","tag":"prose-a","props":{"href":"https://cloud.google.com/sdk/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"こちら"}]},{"type":"text","value":"で説明されているように、Google から Cloud SDK (CLI) をダウンロードしてインストールし、Google Cloud Account でログインして下さい。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"アプリケーションの設定"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E8%A8%AD%E5%AE%9A"},"children":[{"type":"text","value":"アプリケーションの設定"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"一般的な Nuxt アプリーションを App Engine へデプロイするために追加する必要があるのは "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"app.yaml"}]},{"type":"text","value":" と呼ばれるファイルだけです。ルートプロジェクトディレクトリにその名前の新しいファイルを作成し、以下の内容を追加してください："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-yaml"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"runtime"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" nodejs10\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"instance_class"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" F2\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"handlers"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /_nuxt\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"static_dir"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" .nuxt/dist/client\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"secure"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" always\n\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /(."},{"type":"element","tag":"span","props":{"className":["token","important"]},"children":[{"type":"text","value":"*\\.(gif|png|jpg|ico|txt))$"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"static_files"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" static/\\1\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"upload"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" static/."},{"type":"element","tag":"span","props":{"className":["token","important"]},"children":[{"type":"text","value":"*\\.(gif|png|jpg|ico|txt)$"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"secure"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" always\n\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" /.*\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" auto\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"secure"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" always\n\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"env_variables"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"HOST"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'0.0.0.0'"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"またフレキシブルな環境の場合、最小構成は以下になります："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-yaml"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"runtime"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" nodejs\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" flex\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"アプリケーションのビルドとデプロイ"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E3%81%A8%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4"},"children":[{"type":"text","value":"アプリケーションのビルドとデプロイ"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"次にアプリケーションを "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" か "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"yarn build"}]},{"type":"text","value":" でビルドします。"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"現時点で、アプリケーションは Google App Engine にアップロードされる準備ができています。以下のコマンドを実行してください："}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-text"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"gcloud app deploy app.yaml --project [project-id]\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"ほら！今 Nuxt アプリケーションは Google App Engine にホストされています！"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"さらなる詳細情報"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#%E3%81%95%E3%82%89%E3%81%AA%E3%82%8B%E8%A9%B3%E7%B4%B0%E6%83%85%E5%A0%B1"},"children":[{"type":"text","value":"さらなる詳細情報"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"app.yaml ファイルの "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"instance_class"}]},{"type":"text","value":" 属性はアプリケーションインスタンスのクラスをセットします。F2 インスタンスは完全に無料ではなく、しかし Nuxt アプリケーションの実行に必要な最小のメモリを備えています。"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"package.json の "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"start"}]},{"type":"text","value":" はデプロイ後に実行するコマンドであることを確認してください。もし普段 "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"start:prod"}]},{"type":"text","value":"、もしくは他のコマンドで実行しているなら、アプリケーションは期待していたように働かないでしょう。"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"deploy コマンドには "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"project-name"}]},{"type":"text","value":" ではなく "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"project-id"}]},{"type":"text","value":" を指定しているか確認してください。これら 2 つは異なるものですが混合しやすいです。"}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"はじめに","depth":2,"text":"はじめに"},{"id":"アプリケーションの設定","depth":2,"text":"アプリケーションの設定"},{"id":"アプリケーションのビルドとデプロイ","depth":2,"text":"アプリケーションのビルドとデプロイ"},{"id":"さらなる詳細情報","depth":2,"text":"さらなる詳細情報"}]}}}