{"key":"content:pt:deployments:dokku.md","generatedAt":"2022-03-15T12:42:50.090Z","mtime":"2022-03-15T12:42:50.082Z","slug":"dokku","title":"Dokku","position":"999999999999","to":"/pt/deployments/dokku","draft":false,"page":true,"language":"en","template":"guide","description":"Como desdobrar uma aplicação Nuxt no Dokku?","target":"Server","category":"deployment","logo":{"light":"/img/companies/square/light/dokku.png","dark":"/img/companies/square/dark/dokku.png"},"empty":false,"body":{"raw":"---\ntemplate: guide\ntitle: Dokku\ndescription: Como desdobrar uma aplicação Nuxt no Dokku?\ntarget: Server\ncategory: deployment\nlogo:\n  light: \"/img/companies/square/light/dokku.png\"\n  dark: \"/img/companies/square/dark/dokku.png\"\n---\n# Desdobrar o Nuxt no Dokku\n\nComo desdobrar uma aplicação Nuxt no Dokku?\n\n---\n\nNós recomendamos ler a [documentação do Dokku para configuração](http://dokku.viewdocs.io/dokku/getting-started/installation/) e o artigo [Desdobrando uma aplicação Node.js no Digital Ocean usando Dokku](http://jakeklassen.com/post/deploying-a-node-app-on-digital-ocean-using-dokku/).\n\nPor exemplo, nós iremos chamar nossa aplicação Nuxt `my-nuxt-app`.\n\nNós precisamos dizer ao Dokku para instalar as `devDependencies` do projeto (para ser capaz de executar `npm run build`).\n\n```bash\n// no Servidor do Dokku\ndokku config:set my-nuxt-app NPM_CONFIG_PRODUCTION=false YARN_PRODUCTION=false\n```\n\nTambém, nós queremos que nossa aplicação escute no hospedeiro `0.0.0.0` e executar no modo de produção:\n\n```bash\n// no Servidor do Dokku\ndokku config:set my-nuxt-app HOST=0.0.0.0 NODE_ENV=production\n```\n\nVocê deve ver essas 3 linhas quando você digitar `dokku config my-nuxt-app`\n\n![nuxt config vars Dokku](https://i.imgur.com/9FNsaoQ.png)\n\nDepois, nós dizemos ao Dokku para executar `npm run build` através do script `scripts.dokku.predeploy` dentro do `app.json` do nosso projeto:\n\n`crie um ficheiro com o nome app.json dentro da pasta raiz do nosso projeto`\n\n```js\n{\n  \"scripts\": {\n    \"dokku\": {\n      \"predeploy\": \"npm run build\"\n    }\n  }\n}\n```\n\nPara lançar a aplicação nós executamos `npm run start` usando o [Procfile](http://dokku.viewdocs.io/dokku/deployment/methods/dockerfiles/#procfiles-and-multiple-processes):\n\n```\nweb: npm run start\n```\n\nFinalmente, nós podemos empurrar nossa aplicação no Dokku com:\n\n```bash\n// consolide a sua mudança antes de empurrar.\ngit remote add dokku dokku@yourServer:my-nuxt-app\ngit push dokku master\n```\n\nVoilà! Agora a nossa aplicação Nuxt está hospedada no Dokku!\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"desdobrar-o-nuxt-no-dokku"},"children":[{"type":"text","value":"Desdobrar o Nuxt no Dokku"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Como desdobrar uma aplicação Nuxt no Dokku?"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nós recomendamos ler a "},{"type":"element","tag":"prose-a","props":{"href":"http://dokku.viewdocs.io/dokku/getting-started/installation/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"documentação do Dokku para configuração"}]},{"type":"text","value":" e o artigo "},{"type":"element","tag":"prose-a","props":{"href":"http://jakeklassen.com/post/deploying-a-node-app-on-digital-ocean-using-dokku/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Desdobrando uma aplicação Node.js no Digital Ocean usando Dokku"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Por exemplo, nós iremos chamar nossa aplicação Nuxt "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"my-nuxt-app"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nós precisamos dizer ao Dokku para instalar as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"devDependencies"}]},{"type":"text","value":" do projeto (para ser capaz de executar "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":")."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// no Servidor "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"do"}]},{"type":"text","value":" Dokku\ndokku config:set my-nuxt-app "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NPM_CONFIG_PRODUCTION"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"false "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"YARN_PRODUCTION"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"false\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Também, nós queremos que nossa aplicação escute no hospedeiro "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"0.0.0.0"}]},{"type":"text","value":" e executar no modo de produção:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// no Servidor "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"do"}]},{"type":"text","value":" Dokku\ndokku config:set my-nuxt-app "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"HOST"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"0.0"}]},{"type":"text","value":".0.0 "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"production\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Você deve ver essas 3 linhas quando você digitar "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dokku config my-nuxt-app"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"nuxt config vars Dokku","src":"https://i.imgur.com/9FNsaoQ.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Depois, nós dizemos ao Dokku para executar "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" através do script "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"scripts.dokku.predeploy"}]},{"type":"text","value":" dentro do "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"app.json"}]},{"type":"text","value":" do nosso projeto:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"crie um ficheiro com o nome app.json dentro da pasta raiz do nosso projeto"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"dokku\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"predeploy\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"npm run build\""}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Para lançar a aplicação nós executamos "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run start"}]},{"type":"text","value":" usando o "},{"type":"element","tag":"prose-a","props":{"href":"http://dokku.viewdocs.io/dokku/deployment/methods/dockerfiles/#procfiles-and-multiple-processes","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Procfile"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-text"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"web: npm run start\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Finalmente, nós podemos empurrar nossa aplicação no Dokku com:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// consolide a sua mudança antes de empurrar.\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" remote "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" dokku dokku@yourServer:my-nuxt-app\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push dokku master\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Voilà! Agora a nossa aplicação Nuxt está hospedada no Dokku!"}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}}}