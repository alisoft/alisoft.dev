{"key":"content:fr:docs:7.components-glossary:10.watchquery.md","generatedAt":"2022-03-15T12:42:47.593Z","mtime":"2022-03-15T12:42:47.585Z","slug":"watchquery","title":"La propriété watchQuery","position":"999900070010","to":"/docs/components-glossary/watchquery","draft":false,"page":true,"language":"fr","description":"Surveille les query strings et exécute des méthodes de composant lors d'un changement (asyncData, fetch(context), validate, layout, ...)","navigation":{"title":"La propriété watchQuery"},"category":"components-glossary","empty":false,"body":{"raw":"---\ntitle: La propriété watchQuery\ndescription: Surveille les query strings et exécute des méthodes de composant lors d'un changement (asyncData, fetch(context), validate, layout, ...)\nnavigation.title: La propriété watchQuery\ncategory: components-glossary\n---\n# La propriété watchQuery\n\nSurveille les query strings et exécute des méthodes de composant lors d'un changement (asyncData, fetch(context), validate, layout, ...).\n\n---\n\n- **Type:** `Boolean` ou `Array` ou `Function` (par défaut: `[]`)\n\nUtilisez la propriété `watchQuery` pour surveiller les query strings. Si les strings changent, toutes les méthodes du composant (asyncData, fetch(context), validate, layout, ...) seront appelées. La surveillance est désactivée par défaut pour des raisons de performance.\n\nSi l'on souhaite surveiller toutes les query strings, il faut définir `watchQuery: true`.\n\n```js\nexport default {\n  watchQuery: ['page']\n}\n```\n\nOn peut aussi utiliser la fonction `watchQuery(nouvelleRequete, ancienneRequete)` pour avoir une surveillance plus précise.\n\n```js\nexport default {\n  watchQuery(nouvelleRequete, ancienneRequete) {\n    // Exécute seulement les méthodes du composant dans le cas où l'ancienne query string\n    // contenait la chaîne de caractères `bar` et la nouvelle `foo`\n    return nouvelleRequete.foo && ancienneRequete.bar\n  }\n}\n```\n\n::alert{type=\"warning\"}\n\nLe nouveau hook `fetch` (disponible depuis la version 2.12) n'est pas affecté par `watchQuery`. Pour plus d'informations, se référer aux [changements sur la surveillance des query strings](/docs/features/data-fetching#the-fetch-hook).\n\n::","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"la-propriété-watchquery"},"children":[{"type":"text","value":"La propriété watchQuery"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Surveille les query strings et exécute des méthodes de composant lors d'un changement (asyncData, fetch(context), validate, layout, ...)."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Type:"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Boolean"}]},{"type":"text","value":" ou "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Array"}]},{"type":"text","value":" ou "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Function"}]},{"type":"text","value":" (par défaut: "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"[]"}]},{"type":"text","value":")"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Utilisez la propriété "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"watchQuery"}]},{"type":"text","value":" pour surveiller les query strings. Si les strings changent, toutes les méthodes du composant (asyncData, fetch(context), validate, layout, ...) seront appelées. La surveillance est désactivée par défaut pour des raisons de performance."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Si l'on souhaite surveiller toutes les query strings, il faut définir "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"watchQuery: true"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  watchQuery"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'page'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"On peut aussi utiliser la fonction "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"watchQuery(nouvelleRequete, ancienneRequete)"}]},{"type":"text","value":" pour avoir une surveillance plus précise."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"watchQuery"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"text","value":"nouvelleRequete"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ancienneRequete"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Exécute seulement les méthodes du composant dans le cas où l'ancienne query string"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// contenait la chaîne de caractères `bar` et la nouvelle `foo`"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" nouvelleRequete"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"foo"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":" ancienneRequete"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"bar"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Le nouveau hook "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":" (disponible depuis la version 2.12) n'est pas affecté par "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"watchQuery"}]},{"type":"text","value":". Pour plus d'informations, se référer aux "},{"type":"element","tag":"prose-a","props":{"href":"/docs/features/data-fetching#the-fetch-hook"},"children":[{"type":"text","value":"changements sur la surveillance des query strings"}]},{"type":"text","value":"."}]}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}}}